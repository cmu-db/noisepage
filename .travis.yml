sudo: required
language: cpp
services:
  - docker
before_install:
  - docker build -t cmu-db/docker .
  - docker run -itd --name build cmu-db/docker
  - docker exec build git clone https://github.com/cmu-db/terrier.git /repo
script:
  - docker exec build mkdir -p /repo/build
  - docker exec build /bin/sh -c "cd /repo/build && cmake .."
  - docker exec build /bin/sh -c "cd /repo/build && make"
  - docker exec build /bin/sh -c "cd /repo/build && make test"